

<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Simple Map</title>
    <style type="text/css" media="screen">
        #map{border:1px solid #333; width:800px; height:600px; overflow:hidden; position:relative; cursor:move;}
    </style>
</head>
<body>
    <h3>this is a simple Map</h3>
    <hr/>
    <div id="map">
    <img style="width: 256px; height: 256px; position: absolute; left: 0px; top: 0px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1580_339.png"><img style="width: 256px; height: 256px; position: absolute; left: 0px; top: 256px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1580_338.png"><img style="width: 256px; height: 256px; position: absolute; left: 0px; top: 512px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1580_337.png"><img style="width: 256px; height: 256px; position: absolute; left: 0px; top: 768px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1580_336.png"><img style="width: 256px; height: 256px; position: absolute; left: 0px; top: 1024px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1580_335.png"><img style="width: 256px; height: 256px; position: absolute; left: 0px; top: 1280px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1580_334.png"><img style="width: 256px; height: 256px; position: absolute; left: 0px; top: 1536px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1580_333.png"><img style="width: 256px; height: 256px; position: absolute; left: 0px; top: 1792px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1580_332.png"><img style="width: 256px; height: 256px; position: absolute; left: 0px; top: 2048px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1580_331.png"><img style="width: 256px; height: 256px; position: absolute; left: 0px; top: 2304px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1580_330.png"><img style="width: 256px; height: 256px; position: absolute; left: 256px; top: 0px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1581_339.png"><img style="width: 256px; height: 256px; position: absolute; left: 256px; top: 256px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1581_338.png"><img style="width: 256px; height: 256px; position: absolute; left: 256px; top: 512px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1581_337.png"><img style="width: 256px; height: 256px; position: absolute; left: 256px; top: 768px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1581_336.png"><img style="width: 256px; height: 256px; position: absolute; left: 256px; top: 1024px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1581_335.png"><img style="width: 256px; height: 256px; position: absolute; left: 256px; top: 1280px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1581_334.png"><img style="width: 256px; height: 256px; position: absolute; left: 256px; top: 1536px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1581_333.png"><img style="width: 256px; height: 256px; position: absolute; left: 256px; top: 1792px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1581_332.png"><img style="width: 256px; height: 256px; position: absolute; left: 256px; top: 2048px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1581_331.png"><img style="width: 256px; height: 256px; position: absolute; left: 256px; top: 2304px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1581_330.png"><img style="width: 256px; height: 256px; position: absolute; left: 512px; top: 0px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1582_339.png"><img style="width: 256px; height: 256px; position: absolute; left: 512px; top: 256px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1582_338.png"><img style="width: 256px; height: 256px; position: absolute; left: 512px; top: 512px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1582_337.png"><img style="width: 256px; height: 256px; position: absolute; left: 512px; top: 768px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1582_336.png"><img style="width: 256px; height: 256px; position: absolute; left: 512px; top: 1024px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1582_335.png"><img style="width: 256px; height: 256px; position: absolute; left: 512px; top: 1280px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1582_334.png"><img style="width: 256px; height: 256px; position: absolute; left: 512px; top: 1536px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1582_333.png"><img style="width: 256px; height: 256px; position: absolute; left: 512px; top: 1792px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1582_332.png"><img style="width: 256px; height: 256px; position: absolute; left: 512px; top: 2048px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1582_331.png"><img style="width: 256px; height: 256px; position: absolute; left: 512px; top: 2304px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1582_330.png"><img style="width: 256px; height: 256px; position: absolute; left: 768px; top: 0px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1583_339.png"><img style="width: 256px; height: 256px; position: absolute; left: 768px; top: 256px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1583_338.png"><img style="width: 256px; height: 256px; position: absolute; left: 768px; top: 512px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1583_337.png"><img style="width: 256px; height: 256px; position: absolute; left: 768px; top: 768px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1583_336.png"><img style="width: 256px; height: 256px; position: absolute; left: 768px; top: 1024px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1583_335.png"><img style="width: 256px; height: 256px; position: absolute; left: 768px; top: 1280px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1583_334.png"><img style="width: 256px; height: 256px; position: absolute; left: 768px; top: 1536px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1583_333.png"><img style="width: 256px; height: 256px; position: absolute; left: 768px; top: 1792px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1583_332.png"><img style="width: 256px; height: 256px; position: absolute; left: 768px; top: 2048px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1583_331.png"><img style="width: 256px; height: 256px; position: absolute; left: 768px; top: 2304px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1583_330.png"><img style="width: 256px; height: 256px; position: absolute; left: 1024px; top: 0px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1584_339.png"><img style="width: 256px; height: 256px; position: absolute; left: 1024px; top: 256px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1584_338.png"><img style="width: 256px; height: 256px; position: absolute; left: 1024px; top: 512px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1584_337.png"><img style="width: 256px; height: 256px; position: absolute; left: 1024px; top: 768px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1584_336.png"><img style="width: 256px; height: 256px; position: absolute; left: 1024px; top: 1024px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1584_335.png"><img style="width: 256px; height: 256px; position: absolute; left: 1024px; top: 1280px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1584_334.png"><img style="width: 256px; height: 256px; position: absolute; left: 1024px; top: 1536px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1584_333.png"><img style="width: 256px; height: 256px; position: absolute; left: 1024px; top: 1792px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1584_332.png"><img style="width: 256px; height: 256px; position: absolute; left: 1024px; top: 2048px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1584_331.png"><img style="width: 256px; height: 256px; position: absolute; left: 1024px; top: 2304px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1584_330.png"><img style="width: 256px; height: 256px; position: absolute; left: 1280px; top: 0px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1585_339.png"><img style="width: 256px; height: 256px; position: absolute; left: 1280px; top: 256px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1585_338.png"><img style="width: 256px; height: 256px; position: absolute; left: 1280px; top: 512px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1585_337.png"><img style="width: 256px; height: 256px; position: absolute; left: 1280px; top: 768px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1585_336.png"><img style="width: 256px; height: 256px; position: absolute; left: 1280px; top: 1024px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1585_335.png"><img style="width: 256px; height: 256px; position: absolute; left: 1280px; top: 1280px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1585_334.png"><img style="width: 256px; height: 256px; position: absolute; left: 1280px; top: 1536px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1585_333.png"><img style="width: 256px; height: 256px; position: absolute; left: 1280px; top: 1792px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1585_332.png"><img style="width: 256px; height: 256px; position: absolute; left: 1280px; top: 2048px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1585_331.png"><img style="width: 256px; height: 256px; position: absolute; left: 1280px; top: 2304px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1585_330.png"><img style="width: 256px; height: 256px; position: absolute; left: 1536px; top: 0px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1586_339.png"><img style="width: 256px; height: 256px; position: absolute; left: 1536px; top: 256px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1586_338.png"><img style="width: 256px; height: 256px; position: absolute; left: 1536px; top: 512px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1586_337.png"><img style="width: 256px; height: 256px; position: absolute; left: 1536px; top: 768px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1586_336.png"><img style="width: 256px; height: 256px; position: absolute; left: 1536px; top: 1024px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1586_335.png"><img style="width: 256px; height: 256px; position: absolute; left: 1536px; top: 1280px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1586_334.png"><img style="width: 256px; height: 256px; position: absolute; left: 1536px; top: 1536px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1586_333.png"><img style="width: 256px; height: 256px; position: absolute; left: 1536px; top: 1792px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1586_332.png"><img style="width: 256px; height: 256px; position: absolute; left: 1536px; top: 2048px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1586_331.png"><img style="width: 256px; height: 256px; position: absolute; left: 1536px; top: 2304px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1586_330.png"><img style="width: 256px; height: 256px; position: absolute; left: 1792px; top: 0px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1587_339.png"><img style="width: 256px; height: 256px; position: absolute; left: 1792px; top: 256px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1587_338.png"><img style="width: 256px; height: 256px; position: absolute; left: 1792px; top: 512px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1587_337.png"><img style="width: 256px; height: 256px; position: absolute; left: 1792px; top: 768px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1587_336.png"><img style="width: 256px; height: 256px; position: absolute; left: 1792px; top: 1024px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1587_335.png"><img style="width: 256px; height: 256px; position: absolute; left: 1792px; top: 1280px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1587_334.png"><img style="width: 256px; height: 256px; position: absolute; left: 1792px; top: 1536px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1587_333.png"><img style="width: 256px; height: 256px; position: absolute; left: 1792px; top: 1792px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1587_332.png"><img style="width: 256px; height: 256px; position: absolute; left: 1792px; top: 2048px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1587_331.png"><img style="width: 256px; height: 256px; position: absolute; left: 1792px; top: 2304px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1587_330.png"><img style="width: 256px; height: 256px; position: absolute; left: 2048px; top: 0px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1588_339.png"><img style="width: 256px; height: 256px; position: absolute; left: 2048px; top: 256px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1588_338.png"><img style="width: 256px; height: 256px; position: absolute; left: 2048px; top: 512px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1588_337.png"><img style="width: 256px; height: 256px; position: absolute; left: 2048px; top: 768px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1588_336.png"><img style="width: 256px; height: 256px; position: absolute; left: 2048px; top: 1024px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1588_335.png"><img style="width: 256px; height: 256px; position: absolute; left: 2048px; top: 1280px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1588_334.png"><img style="width: 256px; height: 256px; position: absolute; left: 2048px; top: 1536px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1588_333.png"><img style="width: 256px; height: 256px; position: absolute; left: 2048px; top: 1792px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1588_332.png"><img style="width: 256px; height: 256px; position: absolute; left: 2048px; top: 2048px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1588_331.png"><img style="width: 256px; height: 256px; position: absolute; left: 2048px; top: 2304px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1588_330.png"><img style="width: 256px; height: 256px; position: absolute; left: 2304px; top: 0px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1589_339.png"><img style="width: 256px; height: 256px; position: absolute; left: 2304px; top: 256px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1589_338.png"><img style="width: 256px; height: 256px; position: absolute; left: 2304px; top: 512px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1589_337.png"><img style="width: 256px; height: 256px; position: absolute; left: 2304px; top: 768px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1589_336.png"><img style="width: 256px; height: 256px; position: absolute; left: 2304px; top: 1024px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1589_335.png"><img style="width: 256px; height: 256px; position: absolute; left: 2304px; top: 1280px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1589_334.png"><img style="width: 256px; height: 256px; position: absolute; left: 2304px; top: 1536px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1589_333.png"><img style="width: 256px; height: 256px; position: absolute; left: 2304px; top: 1792px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1589_332.png"><img style="width: 256px; height: 256px; position: absolute; left: 2304px; top: 2048px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1589_331.png"><img style="width: 256px; height: 256px; position: absolute; left: 2304px; top: 2304px; z-index: 0; border: 0px; visibility: visible;" width="256" height="256" name="MAPTILEIMAGE" src="1589_330.png">
    </div>

<script type="text/javascript">
/**
 * 
 * 
 * new Dragdrop({
 * 		target 	 拖拽元素 HTMLElemnt 必选
 * 		bridge	 指定鼠标按下哪个元素时开始拖拽，实现模态对话框时用到 
 * 		dragable 是否可拖拽	(true)默认
 * 		dragX 	 true/false false水平方向不可拖拽 (true)默认
 * 		dragY	 true/false false垂直方向不可拖拽 (true)默认
 * 		area 	 [minX,maxX,minY,maxY] 指定拖拽范围 默认任意拖动
 * 		callback 移动过程中的回调函数
 * });
 * source: http://www.nowamagic.net/librarys/veda/detail/1316 
 * demo
 * 		dragdrop_0.6.html
 */
Dragdrop = function(window){
	var doc = window.document;
	var E = {
		on : function(el, type, fn){
			el.addEventListener ?
				el.addEventListener(type, fn, false) :
			el.attachEvent ?
				el.attachEvent("on" + type, fn) :
			el['on'+type] = fn;
		},
		un : function(el,type,fn){
			el.removeEventListener ?
				el.removeEventListener(type, fn, false) :
			el.detachEvent ?
				el.detachEvent("on" + type, fn) :
			el['on'+type] = null;
		},
		evt : function(e){
			return e || window.event;
		}
	};
	return function(opt){
		
		var conf = null, defaultConf, diffX, diffY;
		function Config(opt){
			this.target = opt.target;
			this.bridge = opt.bridge;
			this.dragable = opt.dragable != false;
			this.dragX = opt.dragX != false;
			this.dragY = opt.dragY != false;
			this.area  = opt.area;
			this.callback = opt.callback;
		}	
		function Dragdrop(opt){
			if(!opt){return;}
			conf = new Config(opt);
			defaultConf = new Config(opt);
			conf.bridge ?
				E.on(conf.bridge,'mousedown',mousedown) :
				E.on(conf.target,'mousedown',mousedown);
		}
		Dragdrop.prototype = {
			dragX : function(){
				conf.dragX = true;
				conf.dragY = false;
			},
			dragY : function(b){
				conf.dragY = true;
				conf.dragX = false;
			},
			dragAll : function(){
				conf.dragX = true;
				conf.dragY = true;
			},
			setArea : function(a){
				conf.area = a;
			},
			setBridge : function(b){
				conf.bridge = b;
			},
			setDragable : function(b){
				conf.dragable = b;
			},
			reStore : function(){
				conf = new Config(defaultConf);
				conf.target.style.top = '0px';
				conf.target.style.left = '0px';
			},
			getDragX : function(){
				return conf.dragX;
			},
			getDragY : function(){
				return conf.dragY;
			}
		}
		function mousedown(e){
			e = E.evt(e);
			var el = conf.target;
			el.style.position = 'absolute';
			el.style.cursor = 'move';
			if(el.setCapture){ //IE
				E.on(el, "losecapture", mouseup);
				el.setCapture();
				e.cancelBubble = true;
			}else if(window.captureEvents){ //标准DOM
				e.stopPropagation();
				E.on(window, "blur", mouseup);
				e.preventDefault();
			}
			pre_position_x = e.clientX ;
			pre_position_y = e.clientY ;
			E.on(doc,'mousemove',mousemove);
			E.on(doc,'mouseup',mouseup);
		}
		function mousemove(e){
			var el = conf.target, e = E.evt(e), moveX = e.clientX - pre_position_x, moveY = e.clientY - pre_position_y;
			var minX, maxX, minY, maxY;
			if(conf.area){
				minX = conf.area[0];
				maxX = conf.area[1];
				minY = conf.area[2];
				maxY = conf.area[3];
				moveX < minX && (moveX = minX); // left 最小值
				moveX > maxX && (moveX = maxX); // left 最大值
				moveY < minY && (moveY = minY); // top 最小值
				moveY > maxY && (moveY = maxY); // top 最大值
			}
			if(conf.dragable){
				//conf.dragX && (el.style.left = moveX + 'px');
				//conf.dragY && (el.style.top =  moveY + 'px');
                var imgs = el.children;
                for (var i=0;i< el.children.length;i++) {
                    var t = el.children[i];
                    t.style.left= moveX+ t.offsetLeft + "px";
                    t.style.top = moveY+ t.offsetTop + "px";
                }

				if(conf.callback){
					var obj = {moveX:moveX,moveY:moveY};
					conf.callback.call(conf,obj);
				}
			}
		}
		function mouseup(e){
			var el = conf.target;
			el.style.cursor = 'default';
			E.un(doc,'mousemove',mousemove);
			E.un(doc,'mouseup',mouseup);
			if(el.releaseCapture){ //IE
				E.un(el, "losecapture", mouseup);
				el.releaseCapture();
			}
			if(window.releaseEvents){ //标准DOM
				E.un(window, "blur", mouseup);
			}
		}
		return new Dragdrop(opt);
		
	}
		
}(this);
var $ = function (name) { return document.getElementById(name) };
var drag = new Dragdrop({target:$('map')});
drag.dragAll();
</script>	
</body>
</html>

